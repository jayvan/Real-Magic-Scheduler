<div class='page-header'>
  <h1>
    <%= @user.full_name %>
    (<%= @responder_type %>)
  </h1>
  <% if current_user.admin? %>
    <br />
    <%= link_to '<i class="icon-edit icon-white"></i> Edit Responder'.html_safe, edit_user_path(@user.id), :title => "Edit", :class => 'btn btn-primary' %>
  <% end %>
</div>
<% @shift_types.each do |type| %>
<%
current = format("%7.1f", @user.hours(type))
upcoming = format("%7.1f", @user.upcoming_hours(type))
max = format("%7.1f", @user.hours_quota(type))
style = "progress-success"
style = "progress-danger" if current + upcoming >= max
%>
  <%= type.name %>:
  <%= "#{current} / #{max} (#{upcoming} hours upcoming)" %>
  <div class='progress <%= style %>' style='width:33%'>
    <div class='bar' style='width: <%= (@user.hours(type) / @user.hours_quota(type) * 100) %>%'></div>
  </div>
<% end %>
<div class='well well-small visible-desktop'>Automatically sync your shifts to Google Calendar, Apple iCal, Windows Calendar, etc. Your calendar subscription link: <strong><%= calendar_user_url(@user.id, :auth_token => @user.authentication_token) %></strong></div>
<h3>Upcoming Shifts</h3>
<%= render 'shifts/table', :shifts => @current_shifts %>
<h3>Past Shifts</h3>
<%= render 'shifts/table', :shifts => @past_shifts %>
